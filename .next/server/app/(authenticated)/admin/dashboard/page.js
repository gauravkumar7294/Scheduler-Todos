(()=>{var e={};e.id=21,e.ids=[21],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},6005:e=>{"use strict";e.exports=require("node:crypto")},1017:e=>{"use strict";e.exports=require("path")},7310:e=>{"use strict";e.exports=require("url")},8786:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>l}),s(8258),s(1838),s(5866),s(1216);var a=s(3191),r=s(8716),i=s(7922),n=s.n(i),d=s(5231),o={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>d[e]);s.d(t,o);let l=["",{children:["(authenticated)",{children:["admin",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,8258)),"E:\\SAAS By Hitesh Chaudhary\\scheduler-todos\\app\\(authenticated)\\admin\\dashboard\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,1838)),"E:\\SAAS By Hitesh Chaudhary\\scheduler-todos\\app\\(authenticated)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,1216)),"E:\\SAAS By Hitesh Chaudhary\\scheduler-todos\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["E:\\SAAS By Hitesh Chaudhary\\scheduler-todos\\app\\(authenticated)\\admin\\dashboard\\page.tsx"],u="/(authenticated)/admin/dashboard/page",p={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(authenticated)/admin/dashboard/page",pathname:"/admin/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},9171:(e,t,s)=>{Promise.resolve().then(s.bind(s,2936))},2936:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var a=s(326),r=s(7577),i=s(4215),n=s(3402),d=s(3071),o=s(4432),l=s(772),c=s(5250),u=s(8059);function p(){let{toast:e}=(0,i.pm)(),[t,s]=(0,r.useState)(""),[p,h]=(0,u.nj)("",300),[m,x]=(0,r.useState)(null),[b,f]=(0,r.useState)(!1),[j,y]=(0,r.useState)(1),[g,v]=(0,r.useState)(1),S=(0,r.useCallback)(async t=>{f(!0);try{let s=await fetch(`/api/admin?email=${p}&page=${t}`);if(!s.ok)throw Error("Failed to fetch user data");let a=await s.json();x(a.user),v(a.totalPages),y(a.currentPage),e({title:"Success",description:"User data fetched successfully."})}catch(t){e({title:"Error",description:"Failed to fetch user data. Please try again.",variant:"destructive"})}finally{f(!1)}},[p,e]),P=async()=>{e({title:"Updating Subscription",description:"Please wait..."});try{if(!(await fetch("/api/admin",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:p,isSubscribed:!m?.isSubscribed})})).ok)throw Error("Failed to update subscription");S(j),e({title:"Success",description:"Subscription updated successfully."})}catch(t){e({title:"Error",description:"Failed to update subscription. Please try again.",variant:"destructive"})}},w=async(t,s)=>{e({title:"Updating Todo",description:"Please wait..."});try{if(!(await fetch("/api/admin",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:p,todoId:t,todoCompleted:s})})).ok)throw Error("Failed to update todo");S(j),e({title:"Success",description:"Todo updated successfully."})}catch(t){e({title:"Error",description:"Failed to update todo. Please try again.",variant:"destructive"})}},N=async t=>{e({title:"Deleting Todo",description:"Please wait..."});try{if(!(await fetch("/api/admin",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({todoId:t})})).ok)throw Error("Failed to delete todo");S(j),e({title:"Success",description:"Todo deleted successfully."})}catch(t){e({title:"Error",description:"Failed to delete todo. Please try again.",variant:"destructive"})}};return(0,a.jsxs)("div",{className:"container mx-auto p-4 max-w-3xl mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold mb-8 text-center",children:"Admin Dashboard"}),(0,a.jsxs)(d.Zb,{className:"mb-8",children:[a.jsx(d.Ol,{children:a.jsx(d.ll,{children:"Search User"})}),a.jsx(d.aY,{children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),h(t)},className:"flex space-x-2",children:[a.jsx(o.I,{type:"email",value:t,onChange:e=>s(e.target.value),placeholder:"Enter user email",required:!0}),a.jsx(l.z,{type:"submit",children:"Search"})]})})]}),b?a.jsx(d.Zb,{children:a.jsx(d.aY,{className:"text-center py-8",children:a.jsx("p",{className:"text-muted-foreground",children:"Loading user data..."})})}):m?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(d.Zb,{className:"mb-8",children:[a.jsx(d.Ol,{children:a.jsx(d.ll,{children:"User Details"})}),(0,a.jsxs)(d.aY,{children:[(0,a.jsxs)("p",{children:["Email: ",m.email]}),(0,a.jsxs)("p",{children:["Subscription Status:"," ",m.isSubscribed?"Subscribed":"Not Subscribed"]}),m.subscriptionEnds&&(0,a.jsxs)("p",{children:["Subscription Ends:"," ",new Date(m.subscriptionEnds).toLocaleDateString()]}),a.jsx(l.z,{onClick:P,className:"mt-2",children:m.isSubscribed?"Cancel Subscription":"Subscribe User"})]})]}),m.todos.length>0?(0,a.jsxs)(d.Zb,{children:[a.jsx(d.Ol,{children:a.jsx(d.ll,{children:"User Todos"})}),(0,a.jsxs)(d.aY,{children:[a.jsx("ul",{className:"space-y-4",children:m.todos.map(e=>a.jsx(n.P,{todo:e,isAdmin:!0,onUpdate:w,onDelete:N},e.id))}),a.jsx(c.t,{currentPage:j,totalPages:g,onPageChange:e=>S(e)})]})]}):a.jsx(d.Zb,{children:a.jsx(d.aY,{className:"text-center py-8",children:a.jsx("p",{className:"text-muted-foreground",children:"This user has no todos."})})})]}):p?a.jsx(d.Zb,{children:a.jsx(d.aY,{className:"text-center py-8",children:a.jsx("p",{className:"text-muted-foreground",children:"No user found with this email."})})}):null]})}},5250:(e,t,s)=>{"use strict";s.d(t,{t:()=>i});var a=s(326);s(7577);var r=s(772);function i({currentPage:e,totalPages:t,onPageChange:s}){return(0,a.jsxs)("div",{className:"flex justify-center space-x-2 mt-4",children:[a.jsx(r.z,{onClick:()=>s(e-1),disabled:1===e,variant:"outline",children:"Previous"}),(0,a.jsxs)("span",{className:"flex items-center",children:["Page ",e," of ",t]}),a.jsx(r.z,{onClick:()=>s(e+1),disabled:e===t,variant:"outline",children:"Next"})]})}},3402:(e,t,s)=>{"use strict";s.d(t,{P:()=>c});var a=s(326),r=s(7577),i=s(772),n=s(9669),d=s(361),o=s(8091),l=s(3071);function c({todo:e,isAdmin:t=!1,onUpdate:s,onDelete:c}){let[u,p]=(0,r.useState)(e.completed),h=async()=>{let t=!u;p(t),s(e.id,t)};return a.jsx(l.Zb,{children:(0,a.jsxs)(l.aY,{className:"flex items-center justify-between p-4",children:[a.jsx("span",{className:u?"line-through":"",children:e.title}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(i.z,{variant:"outline",size:"sm",onClick:h,children:[u?a.jsx(n.Z,{className:"mr-2 h-4 w-4"}):a.jsx(d.Z,{className:"mr-2 h-4 w-4"}),u?"Undo":"Complete"]}),(0,a.jsxs)(i.z,{variant:"destructive",size:"sm",onClick:()=>c(e.id),children:[a.jsx(o.Z,{className:"mr-2 h-4 w-4"}),"Delete"]}),t&&(0,a.jsxs)("span",{className:"ml-2 text-sm text-muted-foreground",children:["User ID: ",e.userId]})]})]})})}},4432:(e,t,s)=>{"use strict";s.d(t,{I:()=>n});var a=s(326),r=s(7577),i=s(7863);let n=r.forwardRef(({className:e,type:t,...s},r)=>a.jsx("input",{type:t,className:(0,i.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...s}));n.displayName="Input"},8258:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(8570).createProxy)(String.raw`E:\SAAS By Hitesh Chaudhary\scheduler-todos\app\(authenticated)\admin\dashboard\page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[948,615,459,739,621,404,271,804,324],()=>s(8786));module.exports=a})();